-- ----------------------------------------------------------------
-- This is an attempt to create a full transactional MaNGOS update
-- Now compatible with newer MySql Databases (v1.5)
-- ----------------------------------------------------------------
DROP PROCEDURE IF EXISTS `update_mangos`; 

DELIMITER $$

CREATE DEFINER=`root`@`localhost` PROCEDURE `update_mangos`()
BEGIN
    DECLARE bRollback BOOL  DEFAULT FALSE ;
    DECLARE CONTINUE HANDLER FOR SQLEXCEPTION SET `bRollback` = TRUE;

    -- Current Values (TODO - must be a better way to do this)
    SET @cCurVersion := (SELECT `version` FROM `db_version` ORDER BY `version` DESC, `STRUCTURE` DESC, `CONTENT` DESC LIMIT 0,1);
    SET @cCurStructure := (SELECT `structure` FROM `db_version` ORDER BY `version` DESC, `STRUCTURE` DESC, `CONTENT` DESC LIMIT 0,1);
    SET @cCurContent := (SELECT `content` FROM `db_version` ORDER BY `version` DESC, `STRUCTURE` DESC, `CONTENT` DESC LIMIT 0,1);

    -- Expected Values
    SET @cOldVersion = '21'; 
    SET @cOldStructure = '21'; 
    SET @cOldContent = '011';

    -- New Values
    SET @cNewVersion = '21';
    SET @cNewStructure = '21';
    SET @cNewContent = '012';
                            -- DESCRIPTION IS 30 Characters MAX    
    SET @cNewDescription = 'Loot_fixes';

                        -- COMMENT is 150 Characters MAX
    SET @cNewComment = 'Lott_fixes';

    -- Evaluate all settings
    SET @cCurResult := (SELECT `description` FROM `db_version` ORDER BY `version` DESC, `STRUCTURE` DESC, `CONTENT` DESC LIMIT 0,1);
    SET @cOldResult := (SELECT `description` FROM `db_version` WHERE `version`=@cOldVersion AND `structure`=@cOldStructure AND `content`=@cOldContent);
    SET @cNewResult := (SELECT `description` FROM `db_version` WHERE `version`=@cNewVersion AND `structure`=@cNewStructure AND `content`=@cNewContent);

    IF (@cCurResult = @cOldResult) THEN    -- Does the current version match the expected version
        -- APPLY UPDATE
        START TRANSACTION;
        -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -
        -- -- PLACE UPDATE SQL BELOW -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- --
        -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -
		
		DELETE FROM `reference_loot_template` WHERE `entry` = 12006;
		
		UPDATE `gameobject_loot_template` SET `mincountOrRef` = 1 WHERE `entry` = 16591 AND `item` = 18240;

		-- GUARD MOLDAR default faction
		UPDATE `creature_template` SET `FactionAlliance` = 45, `FactionHorde` = 45 WHERE `Entry` = 14326;

		 
		-- Fix some DB errors at startup :
		-- "Spell (ID: XXXXX) has effect EffectImplicitTargetA/EffectImplicitTargetB = 38 (TARGET_SCRIPT), but does not have record in `spell_script_target`"
		--	Source : CMaNGOS & MangosThree spell_script_target  TABLE 
		
		DELETE FROM  `spell_script_target` WHERE `entry` IN (
		7277,
		9439,
		10805,
		10834,
		10835,
		10836,
		17372,
		18969,
		19515,
		20482,
		21090,
		21556,
		21566,
		23024,
		23415,
		24217,
		28238,
		28338,
		28339,
		28617,
		28781,
		28861,
		28961,
		29108,
		29172,
		29531,
		29705);
        
		INSERT INTO `spell_script_target` (`entry`,`type`,`targetEntry`,`inverseEffectMask`)
		VALUES 
		(7277, 1, 5409, 0),
		(9439, 1, 2164, 0),
		(10805, 1, 7668, 0),
		(10834, 1, 7669, 0),
		(10835, 1, 7670, 0),
		(10836, 1, 7671, 0),
		(17372, 1, 10384, 0),
		(17372, 1, 10385, 0),
		(18969, 1, 1842, 0),
		(19515, 1, 12057, 0),
		(20482, 1, 12099, 0),
		(21090, 1, 11663, 0),
		(21090, 1, 11664, 0),
		(21556, 1, 13378, 0),
		(21566, 1, 13416, 0),
		(23024, 1, 14449, 0),
		(23415, 1, 11583, 0),
		(24217, 1, 15069, 0),
		(28238, 1, 15932, 0),
		(28338, 1, 15929, 0),
		(28339, 1, 15930, 0),
		(28617, 1, 17286, 0),
		(28781, 1, 16127, 0),
		(28781, 1, 16148, 0),
		(28781, 1, 16149, 0),
		(28781, 1, 16150, 0),
		(28861, 1, 16592, 0),
		(28961, 2, 16573, 0),
		(29108, 1, 16486, 0),
		(29172, 0, 181605, 0),
		(29531, 0, 181605, 0),
		(29705, 1, 17066, 0);
		
		-- Missing NPC for spell_target_script
		-- 17286 - Invisible Man (xill be used in future C++ script for Naxxramas, used to sync web traps)
		
		DELETE FROM `creature_template` WHERE entry = 17286;
		INSERT INTO `creature_template`
		(`Entry`, `Name`, `SubName`, `MinLevel`, `MaxLevel`, `ModelId1`, `ModelId2`, `ModelId3`, `ModelId4`, `FactionAlliance`, `FactionHorde`, `Scale`, `Family`, `CreatureType`, `InhabitType`, `RegenerateStats`, `RacialLeader`, `NpcFlags`, `UnitFlags`, `DynamicFlags`, `ExtraFlags`, `CreatureTypeFlags`, `SpeedWalk`, `SpeedRun`, `UnitClass`, `Rank`, `HealthMultiplier`, `PowerMultiplier`, `DamageMultiplier`, `DamageVariance`, `ArmorMultiplier`, `ExperienceMultiplier`, `MinLevelHealth`, `MaxLevelHealth`, `MinLevelMana`, `MaxLevelMana`, `MinMeleeDmg`, `MaxMeleeDmg`, `MinRangedDmg`, `MaxRangedDmg`, `Armor`, `MeleeAttackPower`, `RangedAttackPower`, `MeleeBaseAttackTime`, `RangedBaseAttackTime`, `DamageSchool`, `MinLootGold`, `MaxLootGold`, `LootId`, `PickpocketLootId`, `SkinningLootId`, `KillCredit1`, `KillCredit2`, `MechanicImmuneMask`, `SchoolImmuneMask`, `ResistanceHoly`, `ResistanceFire`, `ResistanceNature`, `ResistanceFrost`, `ResistanceShadow`, `ResistanceArcane`, `PetSpellDataId`, `MovementType`, `TrainerType`, `TrainerSpell`, `TrainerClass`, `TrainerRace`, `TrainerTemplateId`, `VendorTemplateId`, `GossipMenuId`, `EquipmentTemplateId`, `Civilian`, `AIName`)
		VALUES 
		(17286,'Invisible Man','',60,60,15435,0,0,0,114,114,1,0,10,4,3,0,0,33816576,0,64,0,1,1.14286,1,0,1.35,1,1,1,1,1,4120,4120,0,0,104,138,0,0,3791,252,26,2000,2000,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,'');
			
			
		-- Position the NPCs (in naxxramas instance)
		DELETE FROM `creature` WHERE `guid` IN(
				590100,
				590101,
				590102,
				590103,
				590104,
				590105,
				590106,
				590107,
				590108,
				590109);
			
			INSERT INTO `creature`
			(`guid`, `id`, `map`, `modelid`, `equipment_id`, `position_x`, `position_y`, `position_z`, `orientation`, `spawntimesecs`, `spawndist`, `currentwaypoint`, `curhealth`, `curmana`, `DeathState`, `MovementType`)
			VALUES
			(590100,17286,533,0,0,3489.61,-3839.83,322,1.53865,3600,0,0,4120,0,0,0),
			(590101,17286,533,0,0,3507.45,-3838.96,322,1.5198,3600,0,0,4120,0,0,0),
			(590102,17286,533,0,0,3526.49,-3842.83,322,1.04228,3600,0,0,4120,0,0,0),
			(590103,17286,533,0,0,3541.51,-3852.34,322,0.602457,3600,0,0,4120,0,0,0),
			(590104,17286,533,0,0,3551.26,-3865.88,322,0.458729,3600,0,0,4120,0,0,0),
			(590105,17286,533,0,0,3558.49,-3883.9,321.5,0.113154,3600,0,0,4120,0,0,0),
			(590106,17286,533,0,0,3760.57,-5173.32,143.804,1.896,25,0,0,4120,0,0,0),
			(590107,17286,533,0,0,3701.34,-5180.58,143.761,4.4619,25,0,0,4120,0,0,0),
			(590108,17286,533,0,0,3732.47,-5029.1,143.906,1.30774,25,0,0,4120,0,0,0),
			(590109,17286,533,0,0,3782.52,-5063.37,143.774,0.560825,25,0,0,4120,0,0,0)
			;			
			
			
		-- 16592 - Midsummer Bonfire (Spawned by event ?)
			
			
		DELETE FROM `creature_template` WHERE entry = 16592;
			
		INSERT INTO `creature_template`
		(`Entry`, `Name`, `SubName`, `MinLevel`, `MaxLevel`, `ModelId1`, `ModelId2`, `ModelId3`, `ModelId4`, `FactionAlliance`, `FactionHorde`, `Scale`, `Family`, `CreatureType`, `InhabitType`, `RegenerateStats`, `RacialLeader`, `NpcFlags`, `UnitFlags`, `DynamicFlags`, `ExtraFlags`, `CreatureTypeFlags`, `SpeedWalk`, `SpeedRun`, `UnitClass`, `Rank`, `HealthMultiplier`, `PowerMultiplier`, `DamageMultiplier`, `DamageVariance`, `ArmorMultiplier`, `ExperienceMultiplier`, `MinLevelHealth`, `MaxLevelHealth`, `MinLevelMana`, `MaxLevelMana`, `MinMeleeDmg`, `MaxMeleeDmg`, `MinRangedDmg`, `MaxRangedDmg`, `Armor`, `MeleeAttackPower`, `RangedAttackPower`, `MeleeBaseAttackTime`, `RangedBaseAttackTime`, `DamageSchool`, `MinLootGold`, `MaxLootGold`, `LootId`, `PickpocketLootId`, `SkinningLootId`, `KillCredit1`, `KillCredit2`, `MechanicImmuneMask`, `SchoolImmuneMask`, `ResistanceHoly`, `ResistanceFire`, `ResistanceNature`, `ResistanceFrost`, `ResistanceShadow`, `ResistanceArcane`, `PetSpellDataId`, `MovementType`, `TrainerType`, `TrainerSpell`, `TrainerClass`, `TrainerRace`, `TrainerTemplateId`, `VendorTemplateId`, `GossipMenuId`, `EquipmentTemplateId`, `Civilian`, `AIName`)
		VALUES 
		(16592,'MidsummerBonfire','',1,1,11686,0,0,0,35,35,1,0,10,3,3,0,0,0,0,0,0,0,0,1,0,1,1,1,1,1,1,42,42,0,0,2,2,0,0,15,9,0,2000,2000,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,'');

		-- Missing gameObjects 
		-- DB errors at startup: 
		-- "(Entry: XXXX GoType: 3) have data7=ZZZZZZ but trap GO (Entry ZZZZZZ) not exist in `gameobject_template`."
		-- "(Entry: XXXX GoType: 1) have data3=ZZZZZZ but trap GO (Entry ZZZZZZ) not exist in `gameobject_template`."
        -- TRAPS
			
		DELETE FROM `gameobject_template` WHERE `entry` IN(
			177529,	177493,
			178963,	176750,	178248,	178124, 178644, 176592,	175590,	175534,	175535,	175536,	175537,	180525,	179527,	179530,	179531);
		
		INSERT INTO `gameobject_template`
		(`entry`,`type`,`displayId`,`name`,`faction`,`flags`,`size`,`data0`,`data1`,`data2`,`data3`,`data4`,`data5`,`data6`,`data7`,`data8`,`data9`,`data10`,`data11`,`data12`,`data13`,`data14`,`data15`,`data16`,`data17`,`data18`,`data19`,`data20`,`data21`,`data22`,`data23`,`mingold`,`maxgold`)
		VALUES
		(177529,6,327,'AltarofElune(Trap)',0,0,1,0,0,0,18993,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0),
		(177493,6,327,'FireofElune(Trap)',0,0,1,0,0,0,18955,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0),
		(178963,6,2770,'IncantionofCelebrasTrap',0,0,1,0,0,0,21917,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0),
		(176750,6,327,'KodoBones',0,0,1,0,0,0,17960,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0),
		(178248,6,327,'NagaBrazier(trap)',0,0,1,0,0,0,20863,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0),
		(178124,6,327,'ResoniteCrystal(Trap)',0,0,1,0,0,5,20492,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0),
		(178644,6,0,'Ryson\'sAllSeeingEyeTrap',0,0,1,95,200,0,21546,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0),
		(176592,6,327,'ShellfishTrap',0,0,1,0,0,0,17679,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0),
		(175590,6,0,'SpireSpiderEggTrap',0,0,1,0,0,0,16453,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0),
		(175534,6,335,'SupplyCrate',14,0,1.01,12,60,5,16371,1,0,0,0,0,1,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0),
		(175535,6,335,'SupplyCrate',14,0,1.01,12,60,5,16369,1,0,0,0,0,1,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0),
		(175536,6,335,'SupplyCrate',14,0,1.01,12,60,5,16370,1,0,0,0,0,1,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0),
		(175537,6,335,'SupplyCrate',14,0,1.01,12,60,5,16432,1,0,0,0,0,1,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0),
		(180525,6,6424,'TonkControlConsoleTrap',0,0,1,0,0,0,24935,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0),
		(179527,6,391,'WarpwoodPod-Root',0,0,0.75,0,0,10,22800,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0),
		(179530,6,391,'WarpwoodPod-Spore',0,0,0.75,0,0,10,22821,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0),
		(179531,6,391,'WarpwoodPod-Summon',0,0,0.75,0,0,10,22803,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);
		
		
	    -- MISSING SPAWNS from previous gameObjects Traps
				
		DELETE FROM `gameobject`
		WHERE `guid` in (
			9786,	 
			9787,	 
			9788,	 
			9789,	 
			9790,	 
			9791,	 
			9792,	 
			9793,	 
			9794,	 
			9795,	 
			9796,	 
			9797,	 
			9798,	 
			9799,	 
			9800,	 
			9801,	 
			573761,
			573762,
			573763,
			573764,
			573765,
			573766,
			573767,
			573768,
			573769,
			573770,
			573771,
			573772,
			573773,
			573774,
			573775,
			573776,
			573777,
			573778,
			573779,
			573780,
			573781,
			573782,
			573783,
			573784,
			573785,
			573786,
			573787,
			573788,
			573789,
			573790,
			573791,
			573792,
			573793,
			573794,
			573795,
			573796,
			573809,
			573810,
			573811,
			573812,
			573813,
			573814,
			573815,
			573816,
			573817,
			573818,
			573819,
			573820,
			573881,
			573882,
			573883,
			573884,
			573885,
			573886,
			573887,
			573888,
			573889,
			573890,
			573891,
			573892,
			573905,
			573906,
			573907,
			573908,
			573909,
			573910,
			573911,
			573912,
			573913,
			573914,
			573915,
			573916,
			573917,
			573918,
			573919,
			573920,
			573921,
			573922,
			573923,
			573924,
			573925,
			573926,
			573927,
			573928,
			573929,
			573930,
			573931,
			573932,
			573933,
			573934,
			573935,
			573936,
			573937,
			573938,
			573939,
			573940,
			574001,
			574002,
			574003,
			574004,
			574005,
			574006,
			574007,
			574008,
			574009,
			574010,
			574011,
			574012,
			574013,
			574014,
			574015,
			574016,
			574017,
			574018,
			574019,
			574020,
			574021,
			574022,
			574023,
			574024,
			574037,
			574038,
			574039,
			574040,
			574041,
			574042,
			574043,
			574044,
			574045,
			574046,
			574047,
			574048,
			574049,
			574050,
			574051,
			574052,
			574053,
			574054,
			574055,
			574056,
			574057,
			574058,
			574059,
			574060,
			574121,
			574122,
			574123,
			574124,
			574125,
			574126,
			574127,
			574128,
			574129,
			574130,
			574131,
			574132,
			574133,
			574134,
			574135,
			574136,
			574137,
			574138,
			574139,
			574140,
			574141,
			574142,
			574143,
			574144,
			574145,
			574146,
			574147,
			574148,
			574149,
			574150,
			574151,
			574152,
			574153,
			574154,
			574155,
			574156,
			574157,
			574158,
			574159,
			574160,
			574161,
			574162,
			574163,
			574164,
			574165,
			574166,
			574167,
			574168);
			
		INSERT INTO `gameobject`
		(`guid`,`id`,`map`,`position_x`,`position_y`,`position_z`,`orientation`,`rotation0`,`rotation1`,`rotation2`,`rotation3`,`spawntimesecs`,`animprogress`,`state`)
		VALUES
		(9786,180524,1,-1523.32,160.961,-7.7928,3.24635,0,0,-0.998629,0.0523532,0,255,1),
		(9787,180524,1,-1487.81,208.935,-7.7921,5.61996,0,0,-0.325567,0.945519,0,255,1),
		(9788,180524,1,-1532.77,173.65,-7.79281,4.34587,0,0,-0.824126,0.566406,0,255,1),
		(9789,180524,1,-1477.19,221.633,-7.74677,4.62512,0,0,-0.737277,0.675591,0,255,1),
		(9790,180524,1,-1560.91,185.999,-7.64103,4.92183,0,0,-0.62932,0.777146,0,255,1),
		(9791,180524,1,-1538.86,146.234,-7.42401,2.07694,0,0,0.861628,0.507539,0,255,1),
		(9792,180524,1,-1455.81,201.538,-7.79017,2.84488,0,0,0.989016,0.147811,0,255,1),
		(9793,180524,1,-1458.39,214.372,-7.7928,4.45059,0,0,-0.793353,0.608762,0,255,1),
		(9794,180524,1,-1584.36,138.344,-6.63693,0.0698117,0,0,0.0348988,0.999391,0,255,1),
		(9795,180524,1,-1572.92,117.885,-7.75146,1.79769,0,0,0.782608,0.622515,0,255,1),
		(9796,180524,1,-1616.08,127.713,-17.5719,5.39307,0,0,-0.43051,0.902586,0,255,1),
		(9797,180524,1,-1613.56,106.56,-17.7213,1.36136,0,0,0.62932,0.777146,0,255,1),
		(9798,180524,1,-1640.44,105.304,-17.9482,0.244346,0,0,0.121869,0.992546,0,255,1),
		(9799,180524,1,-1479.69,178.979,-7.79281,1.67551,0,0,0.743144,0.669132,0,255,1),
		(9800,180524,1,-1507.46,166.615,-7.7928,2.84488,0,0,0.989016,0.147811,0,255,1),
		(9801,180524,1,-1512.17,186.926,-7.79281,5.72468,0,0,-0.275637,0.961262,0,255,1),
		(573761,176308,329,3584.93,-3482.1,135.124,0.610865,0,0,0.300706,0.953717,10800,100,1),
		(573762,176308,329,3508.78,-3372.3,135.379,-1.98968,0,0,0.838671,-0.544639,10800,100,1),
		(573763,176308,329,3973.62,-3619.9,129.999,-2.37365,0,0,0.927184,-0.374607,10800,100,1),
		(573764,176308,329,3486.79,-3331.54,131.38,1.46608,0,0,0.669131,0.743145,10800,100,1),
		(573765,176308,329,3961.73,-3539.9,127.744,-0.244346,0,0,0.121869,-0.992546,10800,100,1),
		(573766,176308,329,3666.63,-3182.46,126.252,-0.855212,0,0,0.414693,-0.909961,10800,100,1),
		(573767,176308,329,3877.03,-3663.46,143.9,-1.67552,0,0,0.743145,-0.669131,10800,100,1),
		(573768,176308,329,3636.53,-3347.54,125.592,0.715585,0,0,0.350207,0.936672,10800,100,1),
		(573769,176308,329,3888.71,-3699.08,143.85,-0.383972,0,0,0.190809,-0.981627,10800,100,1),
		(573770,176308,329,4104.72,-3435.93,117.802,2.74017,0,0,0.979925,0.199368,10800,100,1),
		(573771,176308,329,3892.38,-3563.78,138.099,-2.28638,0,0,0.909961,-0.414693,10800,100,1),
		(573772,176308,329,3738.43,-3477.54,131.393,-2.86234,0,0,0.990268,-0.139173,10800,100,1),
		(573773,176308,329,3599.32,-3460.67,136.472,-2.21657,0,0,0.894934,-0.446198,10800,100,1),
		(573774,176308,329,3476.95,-3363.85,136.242,-1.98968,0,0,0.838671,-0.544639,10800,100,1),
		(573775,176308,329,3952.68,-3632.92,133.41,-2.51327,0,0,0.951057,-0.309017,10800,100,1),
		(573776,176308,329,3581.11,-3351,129.513,1.6057,0,0,0.71934,0.694658,10800,100,1),
		(573777,176308,329,4062.22,-3515.15,123.116,-2.04204,0,0,0.85264,-0.522498,10800,100,1),
		(573778,176308,329,3656.34,-3210.08,128.257,1.44862,0,0,0.66262,0.748956,10800,100,1),
		(573779,176308,329,3682.68,-3416.87,133.312,0.610865,0,0,0.300706,0.953717,10800,100,1),
		(573780,176308,329,3668.9,-3284.14,128.53,0.034907,0,0,0.017452,0.999848,10800,100,1),
		(573781,176308,329,3788.89,-3624.55,146.377,0.314159,0,0,0.156434,0.987688,10800,100,1),
		(573782,176308,329,3998.96,-3448.72,122.307,0.628319,0,0,0.309017,0.951057,10800,100,1),
		(573783,176308,329,3880.02,-3517.12,139.189,-2.58309,0,0,0.961262,-0.275637,10800,100,1),
		(573784,176308,329,3630.3,-3469.46,138.793,-0.855212,0,0,0.414693,-0.909961,10800,100,1),
		(573785,176308,329,3638.04,-3534.9,138.45,0,0,0,0,1,10800,100,1),
		(573786,176308,329,3543.4,-3432.62,136.636,1.20428,0,0,0.566406,0.824126,10800,100,1),
		(573787,176308,329,4011.06,-3646.39,131.552,0.069813,0,0,0.034899,0.999391,10800,100,1),
		(573788,176308,329,3466.64,-3298.56,132.741,-0.698132,0,0,0.34202,-0.939693,10800,100,1),
		(573789,176308,329,4011.67,-3518.38,122.346,-0.698132,0,0,0.34202,-0.939693,10800,100,1),
		(573790,176308,329,3696.27,-3195.51,127.796,2.51327,0,0,0.951057,0.309017,10800,100,1),
		(573791,176308,329,3665.47,-3662.99,138.414,2.02458,0,0,0.848048,0.529919,10800,100,1),
		(573792,176308,329,3669.82,-3263.99,127.804,-0.10472,0,0,0.052336,-0.99863,10800,100,1),
		(573793,176308,329,3887.52,-3745.81,142.36,2.11185,0,0,0.870356,0.492424,10800,100,1),
		(573794,176308,329,4113.99,-3383.44,117.806,2.98451,0,0,0.996917,0.078459,10800,100,1),
		(573795,176308,329,3862.17,-3610.11,144.137,2.84489,0,0,0.989016,0.147809,10800,100,1),
		(573796,176308,329,3720.45,-3502.32,130.548,2.04204,0,0,0.85264,0.522499,10800,100,1),
		(573809,176308,329,3615.6,-3535.18,138.505,0.785398,0,0,0.382683,0.92388,10800,100,1),
		(573810,176308,329,3521.19,-3409.08,134.254,0.785398,0,0,0.382683,0.92388,10800,100,1),
		(573811,176308,329,4009.57,-3585.86,130.177,-1.91986,0,0,0.819152,-0.573576,10800,100,1),
		(573812,176308,329,3561.1,-3307.54,130.66,-2.05949,0,0,0.857167,-0.515038,10800,100,1),
		(573813,176308,329,4065.88,-3548.68,124.621,1.43117,0,0,0.656059,0.75471,10800,100,1),
		(573814,176308,329,3622.79,-3196.69,131.094,0.855211,0,0,0.414693,0.909961,10800,100,1),
		(573815,176308,329,3711.94,-3147.64,128.189,-2.94961,0,0,0.995396,-0.095846,10800,100,1),
		(573816,176308,329,3658.95,-3364.85,126.05,-0.244346,0,0,0.121869,-0.992546,10800,100,1),
		(573817,176308,329,3862.64,-3663.65,144.775,3.10669,0,0,0.999848,0.017452,10800,100,1),
		(573818,176308,329,4066.38,-3455.35,120.555,-1.25664,0,0,0.587785,-0.809017,10800,100,1),
		(573819,176308,329,3838.05,-3553.55,140.413,0.925024,0,0,0.446198,0.894934,10800,100,1),
		(573820,176308,329,3729.11,-3450.53,130.433,-2.1293,0,0,0.87462,-0.48481,10800,100,1),
		(573881,176304,329,3584.93,-3482.1,135.124,0.610865,0,0,0.300706,0.953717,10800,100,1),
		(573882,176304,329,3508.78,-3372.3,135.379,-1.98968,0,0,0.838671,-0.544639,10800,100,1),
		(573883,176304,329,3973.62,-3619.9,129.999,-2.37365,0,0,0.927184,-0.374607,10800,100,1),
		(573884,176304,329,3486.79,-3331.54,131.38,1.46608,0,0,0.669131,0.743145,10800,100,1),
		(573885,176304,329,3961.73,-3539.9,127.744,-0.244346,0,0,0.121869,-0.992546,10800,100,1),
		(573886,176304,329,3666.63,-3182.46,126.252,-0.855212,0,0,0.414693,-0.909961,10800,100,1),
		(573887,176304,329,3877.03,-3663.46,143.9,-1.67552,0,0,0.743145,-0.669131,10800,100,1),
		(573888,176304,329,3636.53,-3347.54,125.592,0.715585,0,0,0.350207,0.936672,10800,100,1),
		(573889,176304,329,3888.71,-3699.08,143.85,-0.383972,0,0,0.190809,-0.981627,10800,100,1),
		(573890,176304,329,4104.72,-3435.93,117.802,2.74017,0,0,0.979925,0.199368,10800,100,1),
		(573891,176304,329,3892.38,-3563.78,138.099,-2.28638,0,0,0.909961,-0.414693,10800,100,1),
		(573892,176304,329,3738.43,-3477.54,131.393,-2.86234,0,0,0.990268,-0.139173,10800,100,1),
		(573905,176304,329,3638.04,-3534.9,138.45,0,0,0,0,1,10800,100,1),
		(573906,176304,329,3543.4,-3432.62,136.636,1.20428,0,0,0.566406,0.824126,10800,100,1),
		(573907,176304,329,4011.06,-3646.39,131.552,0.069813,0,0,0.034899,0.999391,10800,100,1),
		(573908,176304,329,3466.64,-3298.56,132.741,-0.698132,0,0,0.34202,-0.939693,10800,100,1),
		(573909,176304,329,4011.67,-3518.38,122.346,-0.698132,0,0,0.34202,-0.939693,10800,100,1),
		(573910,176304,329,3696.27,-3195.51,127.796,2.51327,0,0,0.951057,0.309017,10800,100,1),
		(573911,176304,329,3665.47,-3662.99,138.414,2.02458,0,0,0.848048,0.529919,10800,100,1),
		(573912,176304,329,3669.82,-3263.99,127.804,-0.10472,0,0,0.052336,-0.99863,10800,100,1),
		(573913,176304,329,3887.52,-3745.81,142.36,2.11185,0,0,0.870356,0.492424,10800,100,1),
		(573914,176304,329,4113.99,-3383.44,117.806,2.98451,0,0,0.996917,0.078459,10800,100,1),
		(573915,176304,329,3862.17,-3610.11,144.137,2.84489,0,0,0.989016,0.147809,10800,100,1),
		(573916,176304,329,3720.45,-3502.32,130.548,2.04204,0,0,0.85264,0.522499,10800,100,1),
		(573917,176304,329,3592.94,-3512.49,137.395,-0.663225,0,0,0.325568,-0.945519,10800,100,1),
		(573918,176304,329,3477.72,-3397.27,138.636,1.41372,0,0,0.649448,0.760406,10800,100,1),
		(573919,176304,329,3968.17,-3592.17,129.298,0.558505,0,0,0.275637,0.961262,10800,100,1),
		(573920,176304,329,3546.42,-3307.08,130.52,-1.98968,0,0,0.838671,-0.544639,10800,100,1),
		(573921,176304,329,3956.05,-3570.05,129.894,0.767945,0,0,0.374607,0.927184,10800,100,1),
		(573922,176304,329,3704.46,-3168.81,127.617,2.87979,0,0,0.991445,0.130526,10800,100,1),
		(573923,176304,329,4095.95,-3361.53,117.661,-2.30383,0,0,0.913545,-0.406737,10800,100,1),
		(573924,176304,329,3695.37,-3301.16,128.532,2.79253,0,0,0.984808,0.173648,10800,100,1),
		(573925,176304,329,3818.95,-3687.04,144.695,-0.10472,0,0,0.052336,-0.99863,10800,100,1),
		(573926,176304,329,3973.82,-3419.91,120.918,1.29154,0,0,0.601815,0.798636,10800,100,1),
		(573927,176304,329,3870.84,-3598.91,143.474,2.61799,0,0,0.965926,0.258819,10800,100,1),
		(573928,176304,329,3672.29,-3523.02,137.733,2.6529,0,0,0.970296,0.241922,10800,100,1),
		(573929,176304,329,3615.6,-3535.18,138.505,0.785398,0,0,0.382683,0.92388,10800,100,1),
		(573930,176304,329,3521.19,-3409.08,134.254,0.785398,0,0,0.382683,0.92388,10800,100,1),
		(573931,176304,329,4009.57,-3585.86,130.177,-1.91986,0,0,0.819152,-0.573576,10800,100,1),
		(573932,176304,329,3561.1,-3307.54,130.66,-2.05949,0,0,0.857167,-0.515038,10800,100,1),
		(573933,176304,329,4065.88,-3548.68,124.621,1.43117,0,0,0.656059,0.75471,10800,100,1),
		(573934,176304,329,3622.79,-3196.69,131.094,0.855211,0,0,0.414693,0.909961,10800,100,1),
		(573935,176304,329,3711.94,-3147.64,128.189,-2.94961,0,0,0.995396,-0.095846,10800,100,1),
		(573936,176304,329,3658.95,-3364.85,126.05,-0.244346,0,0,0.121869,-0.992546,10800,100,1),
		(573937,176304,329,3862.64,-3663.65,144.775,3.10669,0,0,0.999848,0.017452,10800,100,1),
		(573938,176304,329,4066.38,-3455.35,120.555,-1.25664,0,0,0.587785,-0.809017,10800,100,1),
		(573939,176304,329,3838.05,-3553.55,140.413,0.925024,0,0,0.446198,0.894934,10800,100,1),
		(573940,176304,329,3729.11,-3450.53,130.433,-2.1293,0,0,0.87462,-0.48481,10800,100,1),
		(574001,176307,329,3584.93,-3482.1,135.124,0.610865,0,0,0.300706,0.953717,10800,100,1),
		(574002,176307,329,3508.78,-3372.3,135.379,-1.98968,0,0,0.838671,-0.544639,10800,100,1),
		(574003,176307,329,3973.62,-3619.9,129.999,-2.37365,0,0,0.927184,-0.374607,10800,100,1),
		(574004,176307,329,3486.79,-3331.54,131.38,1.46608,0,0,0.669131,0.743145,10800,100,1),
		(574005,176307,329,3961.73,-3539.9,127.744,-0.244346,0,0,0.121869,-0.992546,10800,100,1),
		(574006,176307,329,3666.63,-3182.46,126.252,-0.855212,0,0,0.414693,-0.909961,10800,100,1),
		(574007,176307,329,3877.03,-3663.46,143.9,-1.67552,0,0,0.743145,-0.669131,10800,100,1),
		(574008,176307,329,3636.53,-3347.54,125.592,0.715585,0,0,0.350207,0.936672,10800,100,1),
		(574009,176307,329,3888.71,-3699.08,143.85,-0.383972,0,0,0.190809,-0.981627,10800,100,1),
		(574010,176307,329,4104.72,-3435.93,117.802,2.74017,0,0,0.979925,0.199368,10800,100,1),
		(574011,176307,329,3892.38,-3563.78,138.099,-2.28638,0,0,0.909961,-0.414693,10800,100,1),
		(574012,176307,329,3738.43,-3477.54,131.393,-2.86234,0,0,0.990268,-0.139173,10800,100,1),
		(574013,176307,329,3599.32,-3460.67,136.472,-2.21657,0,0,0.894934,-0.446198,10800,100,1),
		(574014,176307,329,3476.95,-3363.85,136.242,-1.98968,0,0,0.838671,-0.544639,10800,100,1),
		(574015,176307,329,3952.68,-3632.92,133.41,-2.51327,0,0,0.951057,-0.309017,10800,100,1),
		(574016,176307,329,3581.11,-3351,129.513,1.6057,0,0,0.71934,0.694658,10800,100,1),
		(574017,176307,329,4062.22,-3515.15,123.116,-2.04204,0,0,0.85264,-0.522498,10800,100,1),
		(574018,176307,329,3656.34,-3210.08,128.257,1.44862,0,0,0.66262,0.748956,10800,100,1),
		(574019,176307,329,3682.68,-3416.87,133.312,0.610865,0,0,0.300706,0.953717,10800,100,1),
		(574020,176307,329,3668.9,-3284.14,128.53,0.034907,0,0,0.017452,0.999848,10800,100,1),
		(574021,176307,329,3788.89,-3624.55,146.377,0.314159,0,0,0.156434,0.987688,10800,100,1),
		(574022,176307,329,3998.96,-3448.72,122.307,0.628319,0,0,0.309017,0.951057,10800,100,1),
		(574023,176307,329,3880.02,-3517.12,139.189,-2.58309,0,0,0.961262,-0.275637,10800,100,1),
		(574024,176307,329,3630.3,-3469.46,138.793,-0.855212,0,0,0.414693,-0.909961,10800,100,1),
		(574037,176307,329,3592.94,-3512.49,137.395,-0.663225,0,0,0.325568,-0.945519,10800,100,1),
		(574038,176307,329,3477.72,-3397.27,138.636,1.41372,0,0,0.649448,0.760406,10800,100,1),
		(574039,176307,329,3968.17,-3592.17,129.298,0.558505,0,0,0.275637,0.961262,10800,100,1),
		(574040,176307,329,3546.42,-3307.08,130.52,-1.98968,0,0,0.838671,-0.544639,10800,100,1),
		(574041,176307,329,3956.05,-3570.05,129.894,0.767945,0,0,0.374607,0.927184,10800,100,1),
		(574042,176307,329,3704.46,-3168.81,127.617,2.87979,0,0,0.991445,0.130526,10800,100,1),
		(574043,176307,329,4095.95,-3361.53,117.661,-2.30383,0,0,0.913545,-0.406737,10800,100,1),
		(574044,176307,329,3695.37,-3301.16,128.532,2.79253,0,0,0.984808,0.173648,10800,100,1),
		(574045,176307,329,3818.95,-3687.04,144.695,-0.10472,0,0,0.052336,-0.99863,10800,100,1),
		(574046,176307,329,3973.82,-3419.91,120.918,1.29154,0,0,0.601815,0.798636,10800,100,1),
		(574047,176307,329,3870.84,-3598.91,143.474,2.61799,0,0,0.965926,0.258819,10800,100,1),
		(574048,176307,329,3672.29,-3523.02,137.733,2.6529,0,0,0.970296,0.241922,10800,100,1),
		(574049,176307,329,3615.6,-3535.18,138.505,0.785398,0,0,0.382683,0.92388,10800,100,1),
		(574050,176307,329,3521.19,-3409.08,134.254,0.785398,0,0,0.382683,0.92388,10800,100,1),
		(574051,176307,329,4009.57,-3585.86,130.177,-1.91986,0,0,0.819152,-0.573576,10800,100,1),
		(574052,176307,329,3561.1,-3307.54,130.66,-2.05949,0,0,0.857167,-0.515038,10800,100,1),
		(574053,176307,329,4065.88,-3548.68,124.621,1.43117,0,0,0.656059,0.75471,10800,100,1),
		(574054,176307,329,3622.79,-3196.69,131.094,0.855211,0,0,0.414693,0.909961,10800,100,1),
		(574055,176307,329,3711.94,-3147.64,128.189,-2.94961,0,0,0.995396,-0.095846,10800,100,1),
		(574056,176307,329,3658.95,-3364.85,126.05,-0.244346,0,0,0.121869,-0.992546,10800,100,1),
		(574057,176307,329,3862.64,-3663.65,144.775,3.10669,0,0,0.999848,0.017452,10800,100,1),
		(574058,176307,329,4066.38,-3455.35,120.555,-1.25664,0,0,0.587785,-0.809017,10800,100,1),
		(574059,176307,329,3838.05,-3553.55,140.413,0.925024,0,0,0.446198,0.894934,10800,100,1),
		(574060,176307,329,3729.11,-3450.53,130.433,-2.1293,0,0,0.87462,-0.48481,10800,100,1),
		(574121,176309,329,3584.93,-3482.1,135.124,0.610865,0,0,0.300706,0.953717,10800,100,1),
		(574122,176309,329,3508.78,-3372.3,135.379,-1.98968,0,0,0.838671,-0.544639,10800,100,1),
		(574123,176309,329,3973.62,-3619.9,129.999,-2.37365,0,0,0.927184,-0.374607,10800,100,1),
		(574124,176309,329,3486.79,-3331.54,131.38,1.46608,0,0,0.669131,0.743145,10800,100,1),
		(574125,176309,329,3961.73,-3539.9,127.744,-0.244346,0,0,0.121869,-0.992546,10800,100,1),
		(574126,176309,329,3666.63,-3182.46,126.252,-0.855212,0,0,0.414693,-0.909961,10800,100,1),
		(574127,176309,329,3877.03,-3663.46,143.9,-1.67552,0,0,0.743145,-0.669131,10800,100,1),
		(574128,176309,329,3636.53,-3347.54,125.592,0.715585,0,0,0.350207,0.936672,10800,100,1),
		(574129,176309,329,3888.71,-3699.08,143.85,-0.383972,0,0,0.190809,-0.981627,10800,100,1),
		(574130,176309,329,4104.72,-3435.93,117.802,2.74017,0,0,0.979925,0.199368,10800,100,1),
		(574131,176309,329,3892.38,-3563.78,138.099,-2.28638,0,0,0.909961,-0.414693,10800,100,1),
		(574132,176309,329,3738.43,-3477.54,131.393,-2.86234,0,0,0.990268,-0.139173,10800,100,1),
		(574133,176309,329,3599.32,-3460.67,136.472,-2.21657,0,0,0.894934,-0.446198,10800,100,1),
		(574134,176309,329,3476.95,-3363.85,136.242,-1.98968,0,0,0.838671,-0.544639,10800,100,1),
		(574135,176309,329,3952.68,-3632.92,133.41,-2.51327,0,0,0.951057,-0.309017,10800,100,1),
		(574136,176309,329,3581.11,-3351,129.513,1.6057,0,0,0.71934,0.694658,10800,100,1),
		(574137,176309,329,4062.22,-3515.15,123.116,-2.04204,0,0,0.85264,-0.522498,10800,100,1),
		(574138,176309,329,3656.34,-3210.08,128.257,1.44862,0,0,0.66262,0.748956,10800,100,1),
		(574139,176309,329,3682.68,-3416.87,133.312,0.610865,0,0,0.300706,0.953717,10800,100,1),
		(574140,176309,329,3668.9,-3284.14,128.53,0.034907,0,0,0.017452,0.999848,10800,100,1),
		(574141,176309,329,3788.89,-3624.55,146.377,0.314159,0,0,0.156434,0.987688,10800,100,1),
		(574142,176309,329,3998.96,-3448.72,122.307,0.628319,0,0,0.309017,0.951057,10800,100,1),
		(574143,176309,329,3880.02,-3517.12,139.189,-2.58309,0,0,0.961262,-0.275637,10800,100,1),
		(574144,176309,329,3630.3,-3469.46,138.793,-0.855212,0,0,0.414693,-0.909961,10800,100,1),
		(574145,176309,329,3638.04,-3534.9,138.45,0,0,0,0,1,10800,100,1),
		(574146,176309,329,3543.4,-3432.62,136.636,1.20428,0,0,0.566406,0.824126,10800,100,1),
		(574147,176309,329,4011.06,-3646.39,131.552,0.069813,0,0,0.034899,0.999391,10800,100,1),
		(574148,176309,329,3466.64,-3298.56,132.741,-0.698132,0,0,0.34202,-0.939693,10800,100,1),
		(574149,176309,329,4011.67,-3518.38,122.346,-0.698132,0,0,0.34202,-0.939693,10800,100,1),
		(574150,176309,329,3696.27,-3195.51,127.796,2.51327,0,0,0.951057,0.309017,10800,100,1),
		(574151,176309,329,3665.47,-3662.99,138.414,2.02458,0,0,0.848048,0.529919,10800,100,1),
		(574152,176309,329,3669.82,-3263.99,127.804,-0.10472,0,0,0.052336,-0.99863,10800,100,1),
		(574153,176309,329,3887.52,-3745.81,142.36,2.11185,0,0,0.870356,0.492424,10800,100,1),
		(574154,176309,329,4113.99,-3383.44,117.806,2.98451,0,0,0.996917,0.078459,10800,100,1),
		(574155,176309,329,3862.17,-3610.11,144.137,2.84489,0,0,0.989016,0.147809,10800,100,1),
		(574156,176309,329,3720.45,-3502.32,130.548,2.04204,0,0,0.85264,0.522499,10800,100,1),
		(574157,176309,329,3592.94,-3512.49,137.395,-0.663225,0,0,0.325568,-0.945519,10800,100,1),
		(574158,176309,329,3477.72,-3397.27,138.636,1.41372,0,0,0.649448,0.760406,10800,100,1),
		(574159,176309,329,3968.17,-3592.17,129.298,0.558505,0,0,0.275637,0.961262,10800,100,1),
		(574160,176309,329,3546.42,-3307.08,130.52,-1.98968,0,0,0.838671,-0.544639,10800,100,1),
		(574161,176309,329,3956.05,-3570.05,129.894,0.767945,0,0,0.374607,0.927184,10800,100,1),
		(574162,176309,329,3704.46,-3168.81,127.617,2.87979,0,0,0.991445,0.130526,10800,100,1),
		(574163,176309,329,4095.95,-3361.53,117.661,-2.30383,0,0,0.913545,-0.406737,10800,100,1),
		(574164,176309,329,3695.37,-3301.16,128.532,2.79253,0,0,0.984808,0.173648,10800,100,1),
		(574165,176309,329,3818.95,-3687.04,144.695,-0.10472,0,0,0.052336,-0.99863,10800,100,1),
		(574166,176309,329,3973.82,-3419.91,120.918,1.29154,0,0,0.601815,0.798636,10800,100,1),
		(574167,176309,329,3870.84,-3598.91,143.474,2.61799,0,0,0.965926,0.258819,10800,100,1),
		(574168,176309,329,3672.29,-3523.02,137.733,2.6529,0,0,0.970296,0.241922,10800,100,1);

		
		-- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -
        -- -- PLACE UPDATE SQL ABOVE -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- --
        -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -

        -- If we get here ok, commit the changes
        IF bRollback = TRUE THEN
            ROLLBACK;
            SHOW ERRORS;
            SELECT '* UPDATE FAILED *' AS `===== Status =====`,@cCurResult AS `===== DB is on Version: =====`;
        ELSE
            COMMIT;
            -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -
            -- UPDATE THE DB VERSION
            -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -
            INSERT INTO `db_version` VALUES (@cNewVersion, @cNewStructure, @cNewContent, @cNewDescription, @cNewComment);
            SET @cNewResult := (SELECT `description` FROM `db_version` WHERE `version`=@cNewVersion AND `structure`=@cNewStructure AND `content`=@cNewContent);

            SELECT '* UPDATE COMPLETE *' AS `===== Status =====`,@cNewResult AS `===== DB is now on Version =====`;
        END IF;
    ELSE    -- Current version is not the expected version
        IF (@cCurResult = @cNewResult) THEN    -- Does the current version match the new version
            SELECT '* UPDATE SKIPPED *' AS `===== Status =====`,@cCurResult AS `===== DB is already on Version =====`;
        ELSE    -- Current version is not one related to this update
            IF(@cCurResult IS NULL) THEN    -- Something has gone wrong
                SELECT '* UPDATE FAILED *' AS `===== Status =====`,'Unable to locate DB Version Information' AS `============= Error Message =============`;
            ELSE
                IF(@cOldResult IS NULL) THEN    -- Something has gone wrong
                    SET @cCurVersion := (SELECT `version` FROM `db_version` ORDER BY `version` DESC, `STRUCTURE` DESC, `CONTENT` DESC LIMIT 0,1);
                    SET @cCurStructure := (SELECT `STRUCTURE` FROM `db_version` ORDER BY `version` DESC, `STRUCTURE` DESC, `CONTENT` DESC LIMIT 0,1);
                    SET @cCurContent := (SELECT `Content` FROM `db_version` ORDER BY `version` DESC, `STRUCTURE` DESC, `CONTENT` DESC LIMIT 0,1);
                    SET @cCurOutput = CONCAT(@cCurVersion, '_', @cCurStructure, '_', @cCurContent, ' - ',@cCurResult);
                    SET @cOldResult = CONCAT('Rel',@cOldVersion, '_', @cOldStructure, '_', @cOldContent, ' - ','IS NOT APPLIED');
                    SELECT '* UPDATE SKIPPED *' AS `===== Status =====`,@cOldResult AS `=== Expected ===`,@cCurOutput AS `===== Found Version =====`;
                ELSE
                    SET @cCurVersion := (SELECT `version` FROM `db_version` ORDER BY `version` DESC, `STRUCTURE` DESC, `CONTENT` DESC LIMIT 0,1);
                    SET @cCurStructure := (SELECT `STRUCTURE` FROM `db_version` ORDER BY `version` DESC, `STRUCTURE` DESC, `CONTENT` DESC LIMIT 0,1);
                    SET @cCurContent := (SELECT `Content` FROM `db_version` ORDER BY `version` DESC, `STRUCTURE` DESC, `CONTENT` DESC LIMIT 0,1);
                    SET @cCurOutput = CONCAT(@cCurVersion, '_', @cCurStructure, '_', @cCurContent, ' - ',@cCurResult);
                    SELECT '* UPDATE SKIPPED *' AS `===== Status =====`,@cOldResult AS `=== Expected ===`,@cCurOutput AS `===== Found Version =====`;
                END IF;
            END IF;
        END IF;
    END IF;
END $$

DELIMITER ;

-- Execute the procedure
CALL update_mangos();

-- Drop the procedure
DROP PROCEDURE IF EXISTS `update_mangos`;


