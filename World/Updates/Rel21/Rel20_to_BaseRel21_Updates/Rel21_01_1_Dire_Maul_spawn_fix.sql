-- --------------------------------------------------------------------------------
-- This is an attempt to create a full transactional update
-- --------------------------------------------------------------------------------
DROP PROCEDURE IF EXISTS `update_mangos`; 

DELIMITER $$

CREATE DEFINER=`root`@`localhost` PROCEDURE `update_mangos` ()

BEGIN
    DECLARE bRollback BOOL  DEFAULT FALSE ;
    DECLARE CONTINUE HANDLER FOR SQLEXCEPTION SET `bRollback` = TRUE;

    -- Current Values (TODO - must be a better way to do this)
    SET @cCurVersion := (SELECT `version` FROM db_version ORDER BY `version` DESC, STRUCTURE DESC, CONTENT DESC LIMIT 0,1);
    SET @cCurStructure := (SELECT structure FROM db_version ORDER BY `version` DESC, STRUCTURE DESC, CONTENT DESC LIMIT 0,1);
    SET @cCurContent := (SELECT content FROM db_version ORDER BY `version` DESC, STRUCTURE DESC, CONTENT DESC LIMIT 0,1);

    -- Expected Values
    SET @cOldVersion = '21'; 
    SET @cOldStructure = '1'; 
    SET @cOldContent = '0'; 

    -- New Values
    SET @cNewVersion = '21';
    SET @cNewStructure = '1';
    SET @cNewContent = '1';
                            -- DESCRIPTION IS 30 Characters MAX    
    SET @cNewDescription = 'Fix Dire Maul creature spawn'; 

                        -- COMMENT is 150 Characters MAX
    SET @cNewComment = 'Fix rare creatures spawn in Dire Maul arena';

    -- Evaluate all settings
    SET @cCurResult := (SELECT description FROM db_version ORDER BY `version` DESC, STRUCTURE DESC, CONTENT DESC LIMIT 0,1);
    SET @cOldResult := (SELECT description FROM db_version WHERE `version`=@cOldVersion AND `structure`=@cOldStructure AND `content`=@cOldContent);
    SET @cNewResult := (SELECT description FROM db_version WHERE `version`=@cNewVersion AND `structure`=@cNewStructure AND `content`=@cNewContent);

    IF (@cCurResult = @cOldResult) THEN    -- Does the current version match the expected version
        -- APPLY UPDATE
        START TRANSACTION;

        -- UPDATE THE DB VERSION
        -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -
        INSERT INTO `db_version` VALUES (@cNewVersion, @cNewStructure, @cNewContent, @cNewDescription, @cNewComment);
        SET @cNewResult := (SELECT description FROM db_version WHERE `version`=@cNewVersion AND `structure`=@cNewStructure AND `content`=@cNewContent);

        -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -
        -- -- PLACE UPDATE SQL BELOW -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- --
        -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -

    SET @G=590013;  

    -- Correct some attributes & make 3 rare elites spawn in Dire Maul Arena 
    UPDATE `creature_template` SET `InhabitType`=1, `SpeedWalk`=0.7, `Rank`=2, `HealthMultiplier`=20, `MinLevelHealth`=61040, `MaxLevelHealth`=61040, `LootId`=11447 WHERE `Entry`=11447;
    UPDATE `creature_template` SET `InhabitType`=4, `SpeedWalk`=1, `UnitClass`=2, `Rank`=2, `HealthMultiplier`=30, `PowerMultiplier`=10, `MinLevelHealth`=73260, `MaxLevelHealth`=73260, `MinLevelMana`=24340, `MaxLevelMana`=24340, `LootId`=11497 WHERE `Entry`=11497;
    UPDATE `creature_template` SET `InhabitType`=1, `SpeedWalk`=1, `Rank`=2, `HealthMultiplier`=20, `MinLevelHealth`=57420, `MaxLevelHealth`=57420, `LootId`=11498, `EquipmentTemplateId`=11498 WHERE `Entry`=11498;
    
    DELETE FROM `creature_equip_template_raw` WHERE `entry`=11498;
    INSERT INTO `creature_equip_template_raw` (`entry`, `equipmodel1`, `equipmodel2`, `equipmodel3`, `equipinfo1`, `equipinfo2`, `equipinfo3`, `equipslot1`, `equipslot2`, `equipslot3`) VALUES (11498, 782, 0, 0, 33489666, 0, 0, 781, 0, 0);

    DELETE FROM `creature` WHERE `guid`=@G AND `id`=11447;
    DELETE FROM `creature` WHERE `guid`=@G+1 AND `id`=11497;
    DELETE FROM `creature` WHERE `guid`=@G+2 AND `id`=11498;
    INSERT INTO `creature` (`guid`, `id`, `map`, `modelid`, `equipment_id`, `position_x`, `position_y`, `position_z`, `orientation`, `spawntimesecs`, `spawndist`, `currentwaypoint`, `curhealth`, `curmana`, `DeathState`, `MovementType`) VALUES
    (@G, 11447, 1, 0, 0, -3755.33, 1094.43, 131.969, 3.11817, 21600, 10, 0, 61040, 0, 0, 1),
    (@G+1, 11497, 1, 0, 0, -3755.33, 1094.43, 131.969, 3.11817, 21600, 20, 0, 73260, 24340, 0, 1),
    (@G+2, 11498, 1, 0, 0, -3755.33, 1094.43, 131.969, 3.11817, 21600, 10, 0, 57420, 0, 0, 1);

    DELETE FROM `pool_template` WHERE `entry`=1701;
    INSERT INTO `pool_template` (`entry`, `max_limit`, `description`) VALUES (1701, 1, 'Dire Maul Arena - Rare Elites');

    DELETE FROM `pool_creature` WHERE `guid`=@G AND `pool_entry`=1701;
    DELETE FROM `pool_creature` WHERE `guid`=@G+1 AND `pool_entry`=1701;
    DELETE FROM `pool_creature` WHERE `guid`=@G+2 AND `pool_entry`=1701;
    INSERT INTO `pool_creature` (`guid`, `pool_entry`, `chance`, `description`) VALUES
    (@G, 1701, 0, 'Dire Maul Arena - Mushgog'),
    (@G+1, 1701, 0, 'Dire Maul Arena - The Razza'),
    (@G+2, 1701, 0, 'Dire Maul Arena - Skarr the Unbreakable');  

    -- Loot tables
    DELETE FROM `creature_loot_template` WHERE `entry`=11447;
    DELETE FROM `creature_loot_template` WHERE `entry`=11497;
    DELETE FROM `creature_loot_template` WHERE `entry`=11498;
    INSERT INTO `creature_loot_template` (`entry`, `item`, `ChanceOrQuestChance`, `groupid`, `mincountOrRef`, `maxcount`, `condition_id`) VALUES

    -- Mushgog loot table
    -- (data taken from https://web.archive.org/web/20060721052709/http://wow.allakhazam.com/db/mob.html?wmob=11447)
    (11447, 765, 0.88, 0, 1, 1, 0),
    (11447, 1973, 2.35, 0, 1, 1, 0),
    (11447, 2450, 0.29, 0, 1, 1, 0),
    (11447, 2453, 0.59, 0, 1, 1, 0),
    (11447, 3358, 0.29, 0, 1, 1, 0),
    (11447, 3818, 0.29, 0, 1, 1, 0),
    (11447, 3946, 0.29, 0, 1, 1, 0),
    (11447, 3947, 0.59, 0, 1, 1, 0),
    (11447, 3951, 0.29, 0, 1, 1, 0),
    (11447, 3994, 0.29, 0, 1, 1, 0),
    (11447, 4625, 0.88, 0, 1, 1, 0),
    (11447, 4696, 4.4, 0, 1, 1, 0),
    (11447, 5267, 0.88, 0, 1, 1, 0),
    (11447, 5759, 0.59, 0, 1, 1, 0),
    (11447, 6622, 2.05, 0, 1, 1, 0),
    (11447, 8754, 0.59, 0, 1, 1, 0),
    (11447, 8766, 0.29, 0, 1, 1, 0),
    (11447, 8838, 0.29, 0, 1, 1, 0),
    (11447, 8839, 0.59, 0, 1, 1, 0),
    (11447, 8846, 0.29, 0, 1, 1, 0),
    (11447, 8948, 3.23, 0, 1, 1, 0),
    (11447, 9402, 5.57, 0, 1, 1, 0),
    (11447, 10286, 6.45, 0, 1, 1, 0),
    (11447, 10309, 0.29, 0, 1, 1, 0),
    (11447, 13000, 2.05, 0, 1, 1, 0),
    (11447, 13001, 2.35, 0, 1, 1, 0),
    (11447, 13002, 2.64, 0, 1, 1, 0),
    (11447, 13004, 2.05, 0, 1, 1, 0),
    (11447, 13006, 2.35, 0, 1, 1, 0),
    (11447, 13007, 3.52, 0, 1, 1, 0),
    (11447, 13023, 0.88, 0, 1, 1, 0),
    (11447, 13028, 1.76, 0, 1, 1, 0),
    (11447, 13047, 1.47, 0, 1, 1, 0),
    (11447, 13053, 4.99, 0, 1, 1, 0),
    (11447, 13060, 8.5, 0, 1, 1, 0),
    (11447, 13070, 2.93, 0, 1, 1, 0),
    (11447, 13072, 5.57, 0, 1, 1, 0),
    (11447, 13075, 1.47, 0, 1, 1, 0),
    (11447, 13083, 2.05, 0, 1, 1, 0),
    (11447, 13096, 6.45, 0, 1, 1, 0),
    (11447, 13101, 3.52, 0, 1, 1, 0),
    (11447, 13107, 1.17, 0, 1, 1, 0),
    (11447, 13116, 4.69, 0, 1, 1, 0),
    (11447, 13123, 0.29, 0, 1, 1, 0),
    (11447, 13133, 0.88, 0, 1, 1, 0),
    (11447, 13135, 2.64, 0, 1, 1, 0),
    (11447, 13146, 1.47, 0, 1, 1, 0),
    (11447, 13446, 2.05, 0, 1, 1, 0),
    (11447, 13463, 3.23, 0, 1, 1, 0),
    (11447, 13465, 1.17, 0, 1, 1, 0),
    (11447, 13468, 0.59, 0, 1, 1, 0),
    (11447, 13817, 0.29, 0, 1, 1, 0),
    (11447, 13824, 0.29, 0, 1, 1, 0),
    (11447, 14498, 0.29, 0, 1, 1, 0),
    (11447, 14681, 0.29, 0, 1, 1, 0),
    (11447, 14862, 0.59, 0, 1, 1, 0),
    (11447, 14977, 0.29, 0, 1, 1, 0),
    (11447, 15194, 0.29, 0, 1, 1, 0),
    (11447, 15282, 0.29, 0, 1, 1, 0),
    (11447, 23198, 0.59, 0, 1, 1, 0),
    (11447, 23203, 0.29, 0, 1, 1, 0),
    
    -- The Razza loot table
    -- (taken from https://web.archive.org/web/20060720203755/http://wow.allakhazam.com/db/mob.html?wmob=11497)       
    (11497, 1973, 3.5, 0, 1, 1, 0),
    (11497, 4304, 0.73, 0, 1, 1, 0),
    (11497, 4500, 0.07, 0, 1, 1, 0),
    (11497, 4696, 4.2, 0, 1, 1, 0),
    (11497, 5267, 2.1, 0, 1, 1, 0),
    (11497, 5759, 0.03, 0, 1, 1, 0),
    (11497, 6622, 1.63, 0, 1, 1, 0),
    (11497, 7909, 0.1, 0, 1, 1, 0),
    (11497, 7910, 0.03, 0, 1, 1, 0),
    (11497, 8170, 5.03, 0, 1, 1, 0),
    (11497, 8171, 0.7, 0, 1, 1, 0),
    (11497, 9402, 9.52, 0, 1, 1, 0),
    (11497, 11979, 0.03, 0, 1, 1, 0),
    (11497, 12036, 0.03, 0, 1, 1, 0),
    (11497, 12057, 0.03, 0, 1, 1, 0),
    (11497, 13000, 3.36, 0, 1, 1, 0),
    (11497, 13001, 8.16, 0, 1, 1, 0),
    (11497, 13002, 5.36, 0, 1, 1, 0),
    (11497, 13004, 1.8, 0, 1, 1, 0),
    (11497, 13006, 2.76, 0, 1, 1, 0),
    (11497, 13007, 2.53, 0, 1, 1, 0),
    (11497, 13015, 9.69, 0, 1, 1, 0),
    (11497, 13023, 1.43, 0, 1, 1, 0),
    (11497, 13028, 10.02, 0, 1, 1, 0),
    (11497, 13047, 1.37, 0, 1, 1, 0),
    (11497, 13053, 9.56, 0, 1, 1, 0),
    (11497, 13060, 8.79, 0, 1, 1, 0),
    (11497, 13070, 1.6, 0, 1, 1, 0),
    (11497, 13072, 10.26, 0, 1, 1, 0),
    (11497, 13075, 2.6, 0, 1, 1, 0),
    (11497, 13083, 3.16, 0, 1, 1, 0),
    (11497, 13096, 8.39, 0, 1, 1, 0),
    (11497, 13101, 4.96, 0, 1, 1, 0),
    (11497, 13107, 2.93, 0, 1, 1, 0),
    (11497, 13113, 1.63, 0, 1, 1, 0),
    (11497, 13116, 10.52, 0, 1, 1, 0),
    (11497, 13123, 2.1, 0, 1, 1, 0),
    (11497, 13133, 8.99, 0, 1, 1, 0),
    (11497, 13135, 5.46, 0, 1, 1, 0),
    (11497, 13146, 1.7, 0, 1, 1, 0),
    (11497, 13463, 0.07, 0, 1, 1, 0),
    (11497, 13464, 0.07, 0, 1, 1, 0),
    (11497, 13468, 0.07, 0, 1, 1, 0),
    (11497, 14317, 0.23, 0, 1, 1, 0),
    (11497, 14322, 0.03, 0, 1, 1, 0),
    (11497, 14323, 0.13, 0, 1, 1, 0),
    (11497, 14325, 0.07, 0, 1, 1, 0),
    (11497, 14330, 0.03, 0, 1, 1, 0),
    (11497, 14455, 0.03, 0, 1, 1, 0),
    (11497, 14458, 0.03, 0, 1, 1, 0),
    (11497, 14465, 0.03, 0, 1, 1, 0),
    (11497, 14498, 0.03, 0, 1, 1, 0),
    (11497, 14670, 0.03, 0, 1, 1, 0),
    (11497, 14800, 0.03, 0, 1, 1, 0),
    (11497, 14862, 0.03, 0, 1, 1, 0),
    (11497, 14863, 0.3, 0, 1, 1, 0),
    (11497, 14969, 0.1, 0, 1, 1, 0),
    (11497, 15193, 0.07, 0, 1, 1, 0),
    (11497, 15219, 0.03, 0, 1, 1, 0),
    (11497, 15220, 0.07, 0, 1, 1, 0),
    (11497, 15266, 0.03, 0, 1, 1, 0),
    (11497, 15272, 0.1, 0, 1, 1, 0),
    (11497, 15282, 0.03, 0, 1, 1, 0),
    (11497, 15288, 0.03, 0, 1, 1, 0),
    (11497, 15325, 0.03, 0, 1, 1, 0),
    (11497, 15423, 4.4, 0, 1, 1, 0),
    (11497, 15431, 0.03, 0, 1, 1, 0),
    (11497, 15433, 0.03, 0, 1, 1, 0),
    (11497, 15660, 0.03, 0, 1, 1, 0),
    (11497, 15664, 0.13, 0, 1, 1, 0),
    (11497, 15665, 0.03, 0, 1, 1, 0),
    (11497, 15672, 0.07, 0, 1, 1, 0),
    (11497, 15674, 0.03, 0, 1, 1, 0),
    (11497, 15675, 0.03, 0, 1, 1, 0),
    (11497, 15683, 0.03, 0, 1, 1, 0),
    (11497, 15685, 0.03, 0, 1, 1, 0),
    (11497, 15745, 0.03, 0, 1, 1, 0),
    (11497, 15986, 0.13, 0, 1, 1, 0),
    (11497, 23198, 0.03, 0, 1, 1, 0),
    (11497, 23199, 0.13, 0, 1, 1, 0),
    (11497, 23203, 0.07, 0, 1, 1, 0),
    
    -- Skarr The Unbreakable loot table
    -- (data taken from https://web.archive.org/web/20060720203807/http://wow.allakhazam.com/db/mob.html?wmob=11498)
    (11498, 1973, 7.88, 0, 1, 1, 0),
    (11498, 3944, 0.11, 0, 1, 1, 0),
    (11498, 3945, 0.05, 0, 1, 1, 0),
    (11498, 3946, 0.05, 0, 1, 1, 0),
    (11498, 3947, 0.03, 0, 1, 1, 0),
    (11498, 3948, 0.16, 0, 1, 1, 0),
    (11498, 3950, 0.08, 0, 1, 1, 0),
    (11498, 3951, 0.05, 0, 1, 1, 0),
    (11498, 3970, 0.11, 0, 1, 1, 0),
    (11498, 3971, 0.11, 0, 1, 1, 0),
    (11498, 3972, 0.05, 0, 1, 1, 0),
    (11498, 3973, 0.08, 0, 1, 1, 0),
    (11498, 3975, 0.19, 0, 1, 1, 0),
    (11498, 3987, 0.11, 0, 1, 1, 0),
    (11498, 3990, 0.11, 0, 1, 1, 0),
    (11498, 3992, 0.08, 0, 1, 1, 0),
    (11498, 3994, 0.08, 0, 1, 1, 0),
    (11498, 3995, 0.03, 0, 1, 1, 0),
    (11498, 3997, 0.19, 0, 1, 1, 0),
    (11498, 3998, 0.03, 0, 1, 1, 0),
    (11498, 3999, 0.03, 0, 1, 1, 0),
    (11498, 4500, 0.05, 0, 1, 1, 0),
    (11498, 4696, 9.24, 0, 1, 1, 0),
    (11498, 5267, 0.9, 0, 1, 1, 0),
    (11498, 5759, 0.35, 0, 1, 1, 0),
    (11498, 6622, 0.74, 0, 1, 1, 0),
    (11498, 7909, 0.3, 0, 1, 1, 0),
    (11498, 7910, 0.14, 0, 1, 1, 0),
    (11498, 8083, 0.05, 0, 1, 1, 0),
    (11498, 8085, 0.03, 0, 1, 1, 0),
    (11498, 8086, 0.08, 0, 1, 1, 0),
    (11498, 8752, 0.03, 0, 1, 1, 0),
    (11498, 8753, 0.03, 0, 1, 1, 0),
    (11498, 8766, 1.09, 0, 1, 1, 0),
    (11498, 8952, 1.85, 0, 1, 1, 0),
    (11498, 9402, 9.1, 0, 1, 1, 0),
    (11498, 10305, 0.14, 0, 1, 1, 0),
    (11498, 10306, 0.03, 0, 1, 1, 0),
    (11498, 10307, 0.05, 0, 1, 1, 0),
    (11498, 10308, 0.03, 0, 1, 1, 0),
    (11498, 10309, 0.03, 0, 1, 1, 0),
    (11498, 11978, 0.11, 0, 1, 1, 0),
    (11498, 11979, 0.03, 0, 1, 1, 0),
    (11498, 12695, 0.03, 0, 1, 1, 0),
    (11498, 12713, 0.03, 0, 1, 1, 0),
    (11498, 13000, 2.29, 0, 1, 1, 0),
    (11498, 13001, 2.7, 0, 1, 1, 0),
    (11498, 13002, 10.33, 0, 1, 1, 0),
    (11498, 13004, 3.6, 0, 1, 1, 0),
    (11498, 13006, 2.07, 0, 1, 1, 0),
    (11498, 13007, 4.17, 0, 1, 1, 0),
    (11498, 13015, 3.27, 0, 1, 1, 0),
    (11498, 13023, 0.57, 0, 1, 1, 0),
    (11498, 13028, 4.22, 0, 1, 1, 0),
    (11498, 13036, 1.66, 0, 1, 1, 0),
    (11498, 13044, 1.94, 0, 1, 1, 0),
    (11498, 13047, 3.11, 0, 1, 1, 0),
    (11498, 13053, 8.42, 0, 1, 1, 0),
    (11498, 13060, 8.91, 0, 1, 1, 0),
    (11498, 13070, 4.42, 0, 1, 1, 0),
    (11498, 13072, 9.68, 0, 1, 1, 0),
    (11498, 13075, 0.79, 0, 1, 1, 0),
    (11498, 13077, 1.42, 0, 1, 1, 0),
    (11498, 13083, 2.75, 0, 1, 1, 0),
    (11498, 13091, 1.64, 0, 1, 1, 0),
    (11498, 13096, 8.59, 0, 1, 1, 0),
    (11498, 13101, 9.57, 0, 1, 1, 0),
    (11498, 13107, 2.67, 0, 1, 1, 0),
    (11498, 13113, 0.49, 0, 1, 1, 0),
    (11498, 13116, 2.83, 0, 1, 1, 0),
    (11498, 13118, 1.58, 0, 1, 1, 0),
    (11498, 13123, 2.1, 0, 1, 1, 0),
    (11498, 13133, 3.98, 0, 1, 1, 0),
    (11498, 13135, 8.64, 0, 1, 1, 0),
    (11498, 13146, 3.98, 0, 1, 1, 0),
    (11498, 13444, 0.25, 0, 1, 1, 0),
    (11498, 13446, 0.41, 0, 1, 1, 0),
    (11498, 13463, 0.03, 0, 1, 1, 0),
    (11498, 13464, 0.05, 0, 1, 1, 0),
    (11498, 13465, 0.03, 0, 1, 1, 0),
    (11498, 13816, 0.22, 0, 1, 1, 0),
    (11498, 13817, 0.05, 0, 1, 1, 0),
    (11498, 13818, 0.08, 0, 1, 1, 0),
    (11498, 13819, 0.16, 0, 1, 1, 0),
    (11498, 13820, 0.19, 0, 1, 1, 0),
    (11498, 13821, 0.03, 0, 1, 1, 0),
    (11498, 13822, 0.14, 0, 1, 1, 0),
    (11498, 13823, 0.11, 0, 1, 1, 0),
    (11498, 13824, 0.08, 0, 1, 1, 0),
    (11498, 13825, 0.46, 0, 1, 1, 0),
    (11498, 14047, 11.39, 0, 1, 1, 0),
    (11498, 14305, 0.03, 0, 1, 1, 0),
    (11498, 14310, 0.03, 0, 1, 1, 0),
    (11498, 14314, 0.11, 0, 1, 1, 0),
    (11498, 14320, 0.05, 0, 1, 1, 0),
    (11498, 14327, 0.14, 0, 1, 1, 0),
    (11498, 14457, 0.03, 0, 1, 1, 0),
    (11498, 14458, 0.03, 0, 1, 1, 0),
    (11498, 14465, 0.03, 0, 1, 1, 0),
    (11498, 14492, 0.03, 0, 1, 1, 0),
    (11498, 14494, 0.08, 0, 1, 1, 0),
    (11498, 14499, 0.05, 0, 1, 1, 0),
    (11498, 14508, 0.03, 0, 1, 1, 0),
    (11498, 14676, 0.05, 0, 1, 1, 0),
    (11498, 14677, 0.03, 0, 1, 1, 0),
    (11498, 14683, 0.14, 0, 1, 1, 0),
    (11498, 14684, 0.03, 0, 1, 1, 0),
    (11498, 14800, 0.05, 0, 1, 1, 0),
    (11498, 14804, 0.03, 0, 1, 1, 0),
    (11498, 14805, 0.03, 0, 1, 1, 0),
    (11498, 14854, 0.05, 0, 1, 1, 0),
    (11498, 14858, 0.03, 0, 1, 1, 0),
    (11498, 14865, 0.03, 0, 1, 1, 0),
    (11498, 14869, 0.03, 0, 1, 1, 0),
    (11498, 14932, 0.03, 0, 1, 1, 0),
    (11498, 14969, 0.03, 0, 1, 1, 0),
    (11498, 14970, 0.05, 0, 1, 1, 0),
    (11498, 14971, 0.05, 0, 1, 1, 0),
    (11498, 15179, 0.05, 0, 1, 1, 0),
    (11498, 15185, 0.03, 0, 1, 1, 0),
    (11498, 15192, 0.03, 0, 1, 1, 0),
    (11498, 15239, 0.05, 0, 1, 1, 0),
    (11498, 15256, 0.08, 0, 1, 1, 0),
    (11498, 15265, 0.11, 0, 1, 1, 0),
    (11498, 15266, 0.14, 0, 1, 1, 0),
    (11498, 15272, 0.03, 0, 1, 1, 0),
    (11498, 15276, 0.03, 0, 1, 1, 0),
    (11498, 15282, 0.03, 0, 1, 1, 0),
    (11498, 15426, 0.03, 0, 1, 1, 0),
    (11498, 15429, 0.03, 0, 1, 1, 0),
    (11498, 15434, 0.03, 0, 1, 1, 0),
    (11498, 15662, 0.03, 0, 1, 1, 0),
    (11498, 15674, 0.11, 0, 1, 1, 0),
    (11498, 15681, 0.05, 0, 1, 1, 0),
    (11498, 15746, 0.05, 0, 1, 1, 0),
    (11498, 18335, 0.05, 0, 1, 1, 0),
    (11498, 19284, 0.03, 0, 1, 1, 0),
    (11498, 23198, 0.14, 0, 1, 1, 0),
    (11498, 23199, 0.16, 0, 1, 1, 0),
    (11498, 23203, 0.03, 0, 1, 1, 0);

        -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -
        -- -- PLACE UPDATE SQL ABOVE -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- --
        -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -

        -- If we get here ok, commit the changes
        IF bRollback = TRUE THEN
            ROLLBACK;
            SHOW ERRORS;
            SELECT '* UPDATE FAILED *' AS `===== Status =====`,@cCurResult AS `===== DB is on Version: =====`;



        ELSE
            COMMIT;
            SELECT '* UPDATE COMPLETE *' AS `===== Status =====`,@cNewResult AS `===== DB is now on Version =====`;
        END IF;
    ELSE    -- Current version is not the expected version
        IF (@cCurResult = @cNewResult) THEN    -- Does the current version match the new version
            SELECT '* UPDATE SKIPPED *' AS `===== Status =====`,@cCurResult AS `===== DB is already on Version =====`;
        ELSE    -- Current version is not one related to this update
	    IF(@cCurResult IS NULL) THEN    -- Something has gone wrong
                SELECT '* UPDATE FAILED *' AS `===== Status =====`,'Unable to locate DB Version Information' AS `============= Error Message =============`;
	    ELSE
                SELECT '* UPDATE SKIPPED *' AS `===== Status =====`,@cOldResult AS `=== Expected ===`,@cCurResult AS `===== Found Version =====`;
            END IF;
        END IF;
    END IF;
END $$

DELIMITER ;

-- Execute the procedure
CALL update_mangos();

-- Drop the procedure
DROP PROCEDURE IF EXISTS `update_mangos`;